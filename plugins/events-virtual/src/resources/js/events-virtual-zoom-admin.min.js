window.tribe=window.tribe||{},tribe.events=tribe.events||{},tribe.events.views=tribe.events.views||{},tribe.events.virtualAdmin=tribe.events.virtualAdmin||{},tribe.events.virtualAdminZoom=tribe.events.virtualAdminZoom||{},function(e,t,n,i){var o=e(document);e(window);t.selectors={configureZoom:".tribe-events-virtual-meetings-zoom-details__generate-zoom-button",displayLinkOption:"#tribe-events-virtual-meetings-zoom-display-details",embedVideoOption:"#tribe-events-virtual-embed-video",hidden:".tribe-events-virtual-hidden",linkedButtonOption:"#tribe-events-virtual-linked-button",accountSelect:".tribe-events-virtual-meetings-zoom-details__account-select-link",meetingCreate:".tribe-events-virtual-meetings-zoom-details__create-link",meetingDetails:".tribe-events-virtual-meetings-zoom-details",meetingDetailsFloat:".tribe-events-virtual-meetings-zoom-details--float",meetingRemove:".tribe-events-virtual-meetings-zoom-details__remove-link",remove:".tribe-remove-virtual-event",setupZoomCheckbox:"#tribe-events-virtual-zoom-link-generate",urlField:".tribe-events-virtual-video-source__virtual-url-input",virtualContainer:"#tribe-virtual-events",zoomMeetingsContainer:"#tribe-events-virtual-meetings-zoom",zoomType:'input[name="tribe-events-virtual[zoom-meeting-type]"]:checked'},t.originalState={linkedButtonOption:{checked:e(t.selectors.linkedButtonOption).prop("checked")}},t.state={urlField:{value:""}},t.handleAccountSelection=function(n){n.preventDefault();var i=e(n.target).attr("href"),o=e("#tribe-events-virtual-zoom-account option:selected").val();e.ajax(i,{contentType:"application/json",context:e(t.selectors.zoomMeetingsContainer),data:{zoom_account_id:o},success:t.onMeetingHandlingSuccess})},t.handleMeetingRequest=function(n){n.preventDefault();var i=e(t.selectors.zoomType).val(),o=e("#tribe-events-virtual-zoom-host option:selected").val(),s=e(t.selectors.zoomMeetingsContainer).data("accountId");e.ajax(i,{contentType:"application/json",context:e(t.selectors.zoomMeetingsContainer),data:{zoom_host_id:o,zoom_account_id:s},success:t.onMeetingHandlingSuccess})},t.handleRemoveRequest=function(n){if(n.preventDefault(),confirm(tribe_events_virtual_placeholder_strings.removeConfirm)){var i=e(n.target).attr("href");i&&t.removeRequestAjax(i)}},t.removeRequestAjax=function(n){e.ajax(n,{contentType:"application/json",context:e(t.selectors.zoomMeetingsContainer),success:t.onMeetingHandlingSuccess})},t.onMeetingHandlingSuccess=function(i){e(t.selectors.zoomMeetingsContainer).replaceWith(i),t.setupControls(),t.checkButtons(),t.handleMeetingDetailsClasses(),t.initTribeDropdowns(),e(t.selectors.setupZoomCheckbox).trigger("setup.dependency"),n.handleShowOptionInteractivity&&"function"==typeof n.handleShowOptionInteractivity&&n.handleShowOptionInteractivity()},t.waitForVirtualEventsToLoad=function(){var n=10,i=setInterval(function(){n--,(e(t.selectors.meetingDetails).length||0===n)&&(t.handleMeetingDetailsClasses(),clearInterval(i))},200)},t.handleMeetingDetailsClasses=function(){var n=e(t.selectors.meetingDetails);if(n.length){var i=e(t.selectors.urlField);i.parent().width()>=n.outerWidth(!0)+i.outerWidth(!0)?n.addClass(t.selectors.meetingDetailsFloat.className()):n.removeClass(t.selectors.meetingDetailsFloat.className())}},t.handleLinkedMetaRemove=function(){var n=e(t.selectors.meetingRemove).attr("href");n&&t.removeRequestAjax(n)},t.bindEvents=function(){e(t.selectors.virtualContainer).on("verify.dependency",t.waitForVirtualEventsToLoad).on("click",t.selectors.configureZoom,t.setZoomCheckboxCheckedAttr(!0)).on("click",t.selectors.accountSelect,t.handleAccountSelection).on("click",t.selectors.meetingCreate,t.handleMeetingRequest).on("click",t.selectors.meetingRemove,t.handleRemoveRequest),e(window).on("resize",t.handleMeetingDetailsClasses),o.on("virtual.delete",t.handleLinkedMetaRemove)},t.checkButtons=function(){var n=e(t.selectors.displayLinkOption);e(t.selectors.linkedButtonOption).prop("checked",!0),n.prop("checked",!0)},t.setupControls=function(){var n=e(t.selectors.urlField),i=e(t.selectors.embedVideoOption).closest("li"),o=e(t.selectors.displayLinkOption).closest("li"),s=e(t.selectors.linkedButtonOption);e(t.selectors.meetingDetails).length?(n.prop({disabled:!0}).attr("placeholder",tribe_events_virtual_placeholder_strings.zoom),i.addClass(t.selectors.hidden.className()),o.removeClass(t.selectors.hidden.className()),t.state.urlField.value=n.val(),n.val("")):(n.prop({disabled:!1}).attr("placeholder",tribe_events_virtual_placeholder_strings.video),i.removeClass(t.selectors.hidden.className()),o.addClass(t.selectors.hidden.className()),s.prop("checked",t.originalState.linkedButtonOption.checked),n.val(t.state.urlField.value),t.state.urlField.value="")},t.initTribeDropdowns=function(){e(document).find(t.selectors.zoomMeetingsContainer).find(i.selector.dropdown).not(i.selector.created).tribe_dropdowns()},t.setZoomCheckboxCheckedAttr=function(n){return function(){e(t.selectors.setupZoomCheckbox).prop("checked",n).trigger("verify.dependency")}},t.initMultipleControlsAccordion=function(){if(console.info("Method deprecated with no replacement."),tribe.events.views.accordion){var t=tribe.events.views.accordion,n=e("#tribe-events-virtual-meetings-zoom.tribe-events-virtual-meetings-zoom-controls--multi");t.bindAccordionEvents(n)}},t.ready=function(){t.bindEvents(),t.handleMeetingDetailsClasses()},e(t.ready)}(jQuery,tribe.events.virtualAdminZoom,tribe.events.virtualAdmin,tribe_dropdowns);